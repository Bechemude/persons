{"version":3,"sources":["persons/core.cljs"],"mappings":"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","names":["G__44075","props__28407__auto__","maybe-ref__28408__auto__","vec__44076","helix.core/extract-cljs-props","map__44079","cljs.core.nth","cljs.core/--destructure-map","cljs.core.get","goog/DEBUG","G__44113","goog.object/set","persons.core/edit-modal","id","set-modal-opened","vec__44080","form","set-form","helix.hooks/use-state","ajax.core.GET","response","G__44085","cljs.core/first","cljs.core.println","G__44088","G__44089","G__44090","cljs.core/assoc","p1__44069#","G__44093","G__44094","G__44095","p1__44070#","G__44098","G__44099","G__44100","p1__44071#","G__44103","G__44104","G__44105","p1__44072#","G__44108","G__44109","G__44110","p1__44073#","ajax.core.POST","helix.core/get-react","obj44149","obj44151","obj44204","obj44206","G__44115","vec__44116","map__44119","G__44130","persons.core/delete-modal","helix.core/Fragment","ajax.core/DELETE","G__44132","vec__44133","map__44136","G__44152","persons.core/modal","person-id","modal-type","G__44147","js/Error","G__44154","vec__44155","map__44158","G__44173","persons.core/table","persons","set-modal-type","set-person-id","cljs.core.not_EQ_","cljs.core/count","cljs.core.map_indexed","p__44159","map__44160","i","full_name","sex","birth-date","address","insurance-policy-number","G__44166","G__44167","fexpr__44165","G__44171","G__44172","fexpr__44170","G__44175","vec__44176","G__44207","persons.core/app","vec__44179","vec__44182","vec__44185","vec__44188","vec__44191","set-persons","is-modal-opened?","is-loading?","set-loaded","G__44201","G__44202","fexpr__44200","obj44087","helix.impl.props/or-undefined","obj44092","obj44097","obj44102","obj44107","obj44112","obj44121","obj44123","helix.impl.props/->js","obj44125","obj44127","obj44129","obj44138","obj44140","obj44142","obj44144","obj44146","obj44162","obj44164","obj44169","obj44199","persons.core/init","js/module$node_modules$react_dom$index.render","js/document.getElementById","G__44083","helix.hooks/wrap-fx","G__44084","helix.hooks/raw-use-effect","G__44194","G__44195","G__44196","G__44197"],"sourcesContent":["(ns persons.core\n  (:require\n   [ajax.core :refer [GET POST PUT DELETE]]\n   [helix.core :refer [defnc $ <>]]\n   [helix.hooks :as hooks]\n   [helix.dom :as d]\n   [\"react-dom\" :as rdom]))\n\n\n\n\n(defnc edit-modal [{:keys [id set-modal-opened]}]\n  (let [[form set-form] (hooks/use-state {:full-name nil\n                                          :sex nil\n                                          :birth-date nil\n                                          :address nil\n                                          :insurance-policy-number nil})]\n    (hooks/use-effect\n     [id]\n     (when id \n       (GET (str \"http://localhost:8080/persons/\" id)\n            {:handler (fn [response]\n                      \n                        (set-form (first response)))})))\n    (println form)\n   (<> \n    (if id  \n      (d/h2 \"Edit person \" id)\n      (d/h2  \"Create person\"))\n                  (d/input {:type \"text\" :placeholder \"\u0424\u0418\u041e\" :value (:full-name form)\n                            :on-change #(set-form assoc :full-name (.. % -target -value))})\n                  (d/select {:type \"select\" :placeholder \"\u041f\u043e\u043b\" :value (:sex form)\n                              :on-change #(set-form assoc :sex (.. % -target -value))}\n                            (d/option \"\")\n                            (d/option \"male\")\n                            (d/option \"female\")\n                            (d/option \"other\"))\n                  (d/input {:type \"date\" :placeholder \"\u0414\u0430\u0442\u0430 \u0440\u043e\u0436\u0434\u0435\u043d\u0438\u044f\" :value (:birth-date form)\n                             :on-change #(set-form assoc :birth-date (.. % -target -value))})\n                  (d/input {:type \"text\" :placeholder \"\u0410\u0434\u0440\u0435\u0441\" :value (:address form)\n                             :on-change #(set-form assoc :address (.. % -target -value))})\n                  (d/input {:type \"number\" :placeholder \"\u041d\u043e\u043c\u0435\u0440 \u043f\u043e\u043b\u0438\u0441\u0430 \u041e\u041c\u0421\" \n                            :value (:insurance-policy-number form)\n                            :on-change #(set-form assoc :insurance-policy-number\n                                                  (.. % -target -value))})\n                  (d/input {:type \"button\" :value \"Save!\"\n                            :on-click #(POST \"http://localhost:8080/persons\" {:body form}\n                                              {:handler (fn [response]\n                                                          (println response)\n                                                          )})}))))\n\n\n                         \n\n(defnc delete-modal [{:keys [id set-modal-opened]}]\n  (<>\n   (d/h2 \"Are you sure?\")\n   (d/p \"Delete person \" id)\n   (d/div {:style {:display \"flex\" :justify-content \"space-between\"}}\n          (d/input {:style {:margin-bottom 0} \n                    :type \"button\" :value \"Cancel\" :on-click #(set-modal-opened false)})\n          (d/input {:type \"button\" :value \"Delete\" \n                    :on-click #(DELETE (str \"http://localhost:8080/persons/\" id))}))))\n\n\n(defnc modal [{:keys [person-id modal-type set-modal-opened]}]\n  (d/div {:style {:position \"fixed\" \n                  :overflow \"hidden\" \n                  :left \"0\" :top \"0\" :background \"rgb(0 0 0 / 30%)\"\n                  :width \"100vw\" :height \"100vh\"}}\n         (d/form {:style \n                  {:display \"grid\" :width \"50%\" :margin \"200px auto\"\n                    :padding \"2em\" :background \"#f9f9f9\"}}\n                 (d/button {:on-click #(set-modal-opened false)} \"close\")\n                 (case modal-type\n                   \"delete\" ($ delete-modal {:id person-id \n                                             :set-modal-opened set-modal-opened})\n                   \"edit\" ($ edit-modal  {:id person-id \n                                          :set-modal-opened set-modal-opened})))))\n\n\n(defnc table [{:keys [persons set-modal-opened set-modal-type set-person-id]}]\n  (if (not= (count persons) 0) \n    (d/table\n     (d/thead\n      (d/tr \n       (d/th \"id\")\n       (d/th \"\u0424\u0418\u041e\")\n       (d/th \"\u041f\u043e\u043b\")\n       (d/th \"\u0414\u0430\u0442\u0430 \u0440\u043e\u0436\u0434\u0435\u043d\u0438\u044f\")\n       (d/th \"\u0410\u0434\u0440\u0435\u0441\")\n       (d/th \"\u041d\u043e\u043c\u0435\u0440 \u043f\u043e\u043b\u0438\u0441\u0430 \u041e\u041c\u0421\")))\n     (d/tbody\n      (map-indexed \n       (fn [i {:keys [id full_name sex birth-date address insurance-policy-number]}]\n         (d/tr {:key i} \n               (d/td id)\n               (d/td full_name)               \n               (d/td sex)\n               (d/td birth-date)\n               (d/td address)\n               (d/td insurance-policy-number)\n               (d/td (d/button {:on-click #((set-person-id id)\n                                            (set-modal-type \"edit\")\n                                            (set-modal-opened true))}\n                               \"Edit\"))\n               (d/td (d/button {:on-click #((set-person-id id)\n                                            (set-modal-type \"delete\")\n                                            (set-modal-opened true))} \n                               \"Delete\"))))\n       persons))) \n    (d/h2  \"List is empty\")))\n\n\n;; (def table-mocks [\n;;                   {:id 1\n;;                    :full-name \"Sirotin Alexandr\" \n;;                    :birth-date \"07.12.1991\"\n;;                    :sex \"male\"\n;;                    :address \"Saint-Petersburg\"\n;;                    :insurance-policy-number 1234123412341234}\n;;                   {:id 2\n;;                    :full-name \"Sirotin Alexandr\" \n;;                    :birth-date \"07.12.1991\"\n;;                    :sex \"male\"\n;;                    :address \"Saint-Petersburg\"\n;;                    :insurance-policy-number 1234123412341234}]) \n\n\n(defnc app []\n  (let [[persons set-persons] (hooks/use-state nil)\n        [person-id set-person-id] (hooks/use-state nil)\n        [modal-type set-modal-type] (hooks/use-state nil)\n        [is-modal-opened? set-modal-opened] (hooks/use-state false)\n        [is-loading? set-loaded] (hooks/use-state true)]\n    (hooks/use-effect \n     [is-modal-opened?]\n     (println modal-type))\n    (hooks/use-effect\n     :once\n     (GET \"http://localhost:8080/persons\"\n          {:handler (fn [response]\n                      (set-loaded false)\n                      (set-persons response))}))\n    (d/div\n     (d/h1 \"Persons\")\n     (d/button {:on-click #((set-person-id nil)\n                            (set-modal-type \"edit\")\n                            (set-modal-opened true))} \n               \"Add new person\")\n     (if is-loading?\n       (d/h2 \"Loading...\")\n       ($ table {:persons persons \n                 :set-person-id set-person-id \n                 :set-modal-type set-modal-type \n                 :set-modal-opened set-modal-opened}))\n     (when (true? is-modal-opened?)\n       ($ modal {:person-id person-id \n                 :modal-type modal-type \n                 :set-modal-opened set-modal-opened})))))\n\n\n(defn ^:export ^:dev/after-load init []\n  (println \"start\")\n  (rdom/render ($ app) (js/document.getElementById \"app\")))\n\n\n\n\n\n\n\n\n\n\n"]}